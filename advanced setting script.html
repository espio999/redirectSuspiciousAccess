<!--
<noscript>
  <meta http-equiv="refresh" content="0;URL='https://impsbl.hatenablog.jp/entry/20251231?&uid=NS#%E4%B8%8D%E5%AF%A9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%AEredirect%E5%85%88'" />
</noscript>
-->

<noscript>
  <meta http-equiv="refresh" content="0;URL='https://127.0.0.1'" />
</noscript>

<script>
  function executeRedirect_inline(source){
    const CONFIG = {
      REDIRECT_BASE: "https://127.0.0.1",
      WARNING_URL: "https://impsbl.hatenablog.jp/entry/20251231",
      WARNING_HASH: "#%E4%B8%8D%E5%AF%A9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%AEredirect%E5%85%88"
    };

    let destination_url;

    switch (source) {
      case "juicer":
      case "umami":
        destination_url = CONFIG.WARNING_URL + CONFIG.WARNING_HASH;
        break;
      default:
        destinationUrl = CONFIG.REDIRECT_BASE;
    }

    window.location.replace(destination_url);
  }

  async function logToDiscord_inline(comment) {
    // Discord„ÅÆWebhook URLÔºà„Åì„Åì„Å´ÂèñÂæó„Åó„ÅüURL„Çí„Éö„Éº„Çπ„Éà„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºâ
    const webhookUrl = 'https://discord.com/api/webhooks/1459720856203825315/jcn_enLc0xQKrTtKvSJev_T3m_cAnlBVlEgqZxESPBBp1V0pcPL5LGypcSJ8uZ47Q7d2';

    // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÅÆÂèñÂæó
    const ua = navigator.userAgent;
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
    const resolution = `${window.screen.width}x${window.screen.height}`;
    const previous_url = `${document.referrer}`;
    const current_url = `${window.location.href}`;

    // Á∞°Âçò„Å™OS„Éª„Éñ„É©„Ç¶„Ç∂Âà§Âà•„É≠„Ç∏„ÉÉ„ÇØ
    let os = "Unknown OS";
    if (ua.indexOf("Win") != -1) os = "Windows";
    if (ua.indexOf("Mac") != -1) os = "Mac OS";
    if (ua.indexOf("Linux") != -1) os = "Linux";
    if (ua.indexOf("Android") != -1) os = "Android";
    if (ua.indexOf("like Mac") != -1) os = "iOS";

    let browser = "Unknown Browser";
    if (ua.indexOf("Chrome") != -1) browser = "Chrome";
    else if (ua.indexOf("Firefox") != -1) browser = "Firefox";
    else if (ua.indexOf("Safari") != -1) browser = "Safari";
    else if (ua.indexOf("Edge") != -1) browser = "Edge";

    // Discord„Å´ÈÄÅ‰ø°„Åô„Çã„Éá„Éº„ÇøÊßãÈÄ†
    let log_title = "ü´• Default";
    let log_color = 16777215; //ÁôΩËâ≤

    switch (mode) {
      case "record":
        log_title = "üëª NoReferrer Access";
        log_color = 10181046; // Á¥´Ëâ≤
        break;
      case "redirect":
        log_title = "üöÄ Redirect Log";
        log_color = 15158332; // Ëµ§Ëâ≤
        break;
    }

    const payload = {
        embeds: [{
            title: log_title,
            color: log_color,
            fields: [
                { name: "OS", value: os, inline: true },
                { name: "Browser", value: browser, inline: true },
                { name: "Timezone", value: timezone, inline: true },
                { name: "Resolution", value: resolution, inline: true },
                { name: "Previous URL", value: previous_url, inline: true },
                { name: "Current URL", value: current_url, inline: true },
                { name: "Comment", value: comment || "„Å™„Åó", inline: false },
                { name: "UserAgent", value: `\`\`\`${ua}\`\`\``, inline: false }
            ],
            timestamp: new Date().toISOString()
        }]
    };

    try {
        await fetch(webhookUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
            keepalive: true
        });
    } catch (error) {
        console.error('Failed to post to Discord:', error);
    }
  }

  (function() {
    let isRedirecting = false;

    const redirect = (source) => {
      if (isRedirecting) return;
      isRedirecting = true;

      logToDiscord_inline(`onError: ${source}`);
      executeRedirect_inline(source);
    };

    // Â§ñÈÉ®„Çπ„ÇØ„É™„Éó„Éà„Åã„ÇâÂëº„Å≥Âá∫„Åõ„Çã„Çà„ÅÜ„Å´window„Å´Á¥ê‰ªò„Åë„Çã
    window.handleScriptError = function(source) {
      redirect(source);
    };
  })();
</script>

<link rel="dns-prefetch" href="https://cdn.jsdelivr.net/" />
<!--
<script src="https://cdn.jsdelivr.net/gh/espio999/getCountry@1.4.5/getCountry.js" async onerror="handleScriptError('getCountry.js')"></script>
<script src="https://cdn.jsdelivr.net/gh/espio999/getPlatform@1.4.20/getPlatform.js" async onerror="handleScriptError('getPlatform.js')"></script>
-->
<script src="https://cdn.jsdelivr.net/gh/espio999/redirectSuspiciousAccess@1.0.0/country.js" defer onerror="handleScriptError('country.js')"></script>
<script src="https://cdn.jsdelivr.net/gh/espio999/redirectSuspiciousAccess@1.0.0/platform.js" defer onerror="handleScriptError('platform.js')"></script>
<script src="https://cdn.jsdelivr.net/gh/espio999/redirectSuspiciousAccess@1.0.0/logging.js" defer onerror="handleScriptError('platform.js')"></script>
<script src="https://cdn.jsdelivr.net/gh/espio999/redirectSuspiciousAccess@1.0.0/redirect.js" defer onerror="handleScriptError('platform.js')"></script>
<script src="https://cdn.jsdelivr.net/gh/espio999/redirectSuspiciousAccess@1.0.0/main.js" defer onerror="handleScriptError('platform.js')"></script>

<!-- Cloudflare Web Analytics -->
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "22648483c0f34f21bf4ba5292447704b"}'></script>
<!-- End Cloudflare Web Analytics -->

<!-- juicer -->
<script src="//kitchen.juicer.cc/?color=cevlk5DYGbE=" async onerror="handleScriptError('juicer')"></script>
<meta name="pocket-site-verification" content="0298daba47760e2b25d7f69a6c6459" />

<!-- Clarity tracking code for https://impsbl.hatenablog.jp/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "59pvwqvhey");
</script>

<!-- umami -->
<script defer src="https://cloud.umami.is/script.js" data-website-id="e1f53978-b437-4804-aa5a-bf515c5e190a" onerror="handleScriptError('umami')"></script>

<!-- Default Statcounter code for Technically Impossible
https://impsbl.hatenablog.jp/ -->
<script type="text/javascript">
var sc_project=13010108; 
var sc_invisible=1; 
var sc_security="a666689f"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img class="statcounter"
src="https://c.statcounter.com/13010108/0/a666689f/1/" alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->

<!----- MathML ----->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','o57ty');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->
